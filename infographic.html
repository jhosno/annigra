<style>
  .more {
    height: 50vh;
  }

  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Source+Serif+Pro:wght@400;600&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Homemade+Apple&display=swap');

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
  }

  @media only screen and (max-width:1950px) {

    main {
      padding-left: 17.8rem;
      padding-right: 17.8rem;
    }
  }


  @media only screen and (max-width: 1657px) {


    main {
      padding-left: 5.5rem;
      padding-right: 5.5rem;
    }
  }


  .infograph {
    display: flex;
    justify-content: space-between;

  }

  .infograph_iconcontainer {
    width: 50%;
    position: relative;
  }

  .infograph_icon {
    position: relative;
    width: 100%;
    height: 22vh;

  }

  .infograph_icon:after {
    content: " ";
    border-bottom: 0.15rem dashed #000;
    width: 75%;
    height: 1px;
    position: absolute;
    left: 25%;
    top: 50%;
  }

  .infograph_number {
    font-size: 1.16rem;
    text-align: center;
    color: white;
    font-family: 'Montserrat';
    background: url(/assets/img/dot-svgrepo-com.svg) center center no-repeat;
    width: 3rem;
    font-weight: 600;
    padding: 0.9rem 0;
    margin-top: -20px;
    position: absolute;
    top: 50%;
    right: -20px;
    z-index: 2;
  }

  .infograph_img {
    width: 9.5rem;
    height: 9.5rem;
    transition: background 0.6s ease-out;
  }

  .s-v1 {
    background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/17719/graphic-thumbprint1.svg) no-repeat center center;
    background-size: contain;
  }

  .s-v2 {
    background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/17719/graphic-thumbprint2.svg) no-repeat center center;
    background-size: contain;
  }

  .s-v3 {
    background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/17719/graphic-thumbprint3.svg) no-repeat center center;
    background-size: contain;
  }

  .s-v4 {
    background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/17719/graphic-thumbprint4.svg) no-repeat center center;
    background-size: contain;
  }

  .s-v5 {
    background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/17719/graphic-thumbprint5.svg) no-repeat center center;
    background-size: contain;
  }

  .infograph_content {
    border-left: #D9D9D9 solid 0.15rem;
    width: 50%;
    padding-left: 2em;
  }

  .infograph_section {
    opacity: 0;
    max-width: 25em;
    margin-bottom: 3rem;
    overflow: hidden;
    transform: translateX(5em);
    transition: opacity 0.6s, transform 0.5s;

  }

  .infograph_section h2 {
    font-family: 'Montserrat';
    font-weight: 600;
  }

  .infograph_section p {
    font-family: "Source Serif Pro", serif;

  }

  .infograph_section.js-animate {
    opacity: 1;
    transform: translateX(0);
  }
</style>
<div class="more"></div>
<main>
  <div class="ourprocess">
    <div class="infograph">
      <div class="infograph_iconcontainer">
        <div class="infograph_icon ">
          <div class="infograph_img s-v1"></div>
          <div class="infograph_number"></div>
        </div>
      </div>


      <div class="infograph_content">
        <div class="infograph_section">
          <h2>Discovery</h2>
          <p>This is the process of us learning as much as we can about you, your story, your business, and your ideal
            client.</p>
        </div>
        <div class="infograph_section">
          <h2>Strategy</h2>
          <p>We use the findings from the discovery phase as the basis for strategy and suggestions for the site design.
          </p>
        </div>
        <div class="infograph_section">
          <h2>Development</h2>
          <p>Using HTML 5, CSS, JQuery, Angular, and other programming languages we develop your website.</p>
        </div>
        <div class="infograph_section">
          <h2>Test</h2>
          <p>We meticulously check for speed, SEO, and mobile optimization to ensure your website is top-notch.</p>
        </div>
        <div class="infograph_section">
          <h2>Launch</h2>
          <p>Once approved by you, we launch your new website for the world to see.</p>
        </div>
      </div>
    </div>
</main>
<div class="more"></div>

<!-- <div class="spacer s2"></div>
<div id="trigger1" class="spacer s0"></div>
<div id="pin1" class="box2 blue">
  <p>Stay where you are (at least for a while).</p>
  <a href="#" class="viewsource">view source</a>
</div>
<div class="spacer s2"></div> -->

<script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/17719/shoestring.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>
<script>
  //document.addEventListener('scroll', () => console.log(window.innerHeight, window.pageYOffset))

  //Rotation Function
  $.fn.rotate = function (degrees) {
    $(this).css({
      '-webkit-transform': 'rotate(' + degrees + 'deg)',
      '-moz-transform': 'rotate(' + degrees + 'deg)',
      '-ms-transform': 'rotate(' + degrees + 'deg)',
      'transform': 'rotate(' + degrees + 'deg)'
    });
    return $(this);
  };

  //Animation Content
  var scrollTopAnimate = function (curPos, winHeight) {
    var yPos;
    $('.infograph_section').each(function () {
      yPos = $(this).offset().top - (winHeight / 2);
      if (curPos >= yPos) {
        if (!$(this).is('.js-animate')) {
          $(this).addClass('js-animate');
        }
      }
    });
  };

  //InfoGraphAnimation
  var animateInfograph = function (offSet, $infograph, $image, $image_container, $sections, $number) {

    //Prep variables
    var scrollTop, rotation;
    var graphHeight = $infograph.height();
    //Image
    var startPos = $image.offset().top;
    var imageHeightC = $image_container.height();
    var imageHeight = $image.height();

    //Sections 
    var $lastSection = $sections.last();
    var lastSectionHeight = $lastSection.height();
    var lastSectionPos = $lastSection.offset().top;

    //Get top offset
    scrollTop = document.body.scrollTop;


    //Sticky if within infographic
    if (scrollTop >= startPos - offSet && scrollTop + imageHeight < lastSectionPos + offSet / 2) {

      $image_container.css({
        top: (scrollTop - startPos) + "px"
      });

      //Rotation
      $image.rotate(360 - (scrollTop - startPos) / 2);

    }
    //Stop at end
    else if (scrollTop + imageHeight >= lastSectionPos + offSet / 2) {

      $image_container.css({
        top: (lastSectionPos - imageHeight) + (offSet / 2) + "px"
      });

    } else {
      $image_container.css({
        top: (startPos) + "px"
      });
    }

    //Sticky Stuff End

    //Image
    //consicional
    console.log(graphHeight)
    console.log(scrollTop + imageHeightC >= $($sections.get(2)).offset().top && scrollTop + imageHeightC < $($sections
      .get(3)).offset().top)
    console.table(scrollTop + imageHeightC , $($sections.get(1)).offset().top, scrollTop + imageHeightC , $($sections
        .get(2)).offset().top)
        console.log($sections.get(2).offsetTop)
      //valores
      //0 - recorrido del scroll + la altura del espacio de la img 
      //1 - según el valor en pixels para medir a partir de que altura se hace la comprovación 
    console.table(scrollTop + imageHeightC, $($sections.get(2)).offset().top, scrollTop + imageHeightC, $($sections
      .get(3)).offset().top)

    if (scrollTop + imageHeightC < $($sections.get(1)).offset().top) {
      $image.removeClass('s-v2').addClass('s-v1');
      $($number).html('1');
    } else if (scrollTop + imageHeightC >= $($sections.get(1)).offset().top && scrollTop + imageHeightC < $($sections
        .get(2)).offset().top) {
      imageHeightC
      $image.removeClass('s-v1').removeClass('s-v3').addClass('s-v2');
      $($number).html('2');

      //trouble
    } else if (scrollTop + imageHeightC >= $($sections.get(2)).offset().top && scrollTop + imageHeightC < $($sections
        .get(3)).offset().top) {
      $image.removeClass('s-v2').removeClass('s-v4').addClass('s-v3');
      $($number).html('3');
    } else if (scrollTop + imageHeightC >= $($sections.get(3)).offset().top && scrollTop + imageHeightC < $($sections
        .get(4)).offset().top) {
      $image.removeClass('s-v3').removeClass('s-v5').addClass('s-v4');
      $($number).html('4');
    } else {
      //trouble
      $image.removeClass('s-v4').addClass('s-v5');
      $($number).html('5');
      
    }

  };

  var offSet = 75;
  var $infograph = $(".infograph");
  var $image = $('.infograph_img');
  var $image_container = $('.infograph_icon');
  var $sections = $('.infograph_section');
  var $number = $('.infograph_number');
  //transform





  scrollTopAnimate(window.pageYOffset, window.innerHeight);
  animateInfograph(offSet, $infograph, $image, $image_container, $sections, $number);

  //On Scroll
  window.onscroll = function () {

    animateInfograph(offSet, $infograph, $image, $image_container, $sections, $number);

    //Content Animation
    scrollTopAnimate(window.pageYOffset, window.innerHeight);

  };
</script>